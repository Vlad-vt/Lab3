# Lab3
SOA Lab3

--------------1. Розповісти про призначення основих компонентів мікросервісної архітектури.---------------------\n
Основним компонентом мікросервісної архітектури  є сервіси. Вони можуть бути написані будь-якою мовою та функціонувати окремо один від одного, що робить їх ідеальними для впровадження різними командами програмного забезпечення.
Наступним компонентом являються контейнери — пакет ПЗ, що працює незалежно. Контейнери працюють для ізоляції кожної служби в одному середовищі, а також забезпечують ресурсозберігаючі засоби для пакетування послуг і пропонують розробникам різні альтернативи розгортання.
Сервісна сітка - рівень інфраструктури, який забезпечує додаткову безпеку та забезпечує динамічний обмін повідомленнями.
Сервісне розгортання - містить інформацію про споживання послуг, постачальника послуг і реєстр послуг. Сервісна сітка використовує їх для розподілу навантажень і адаптації до змін у розгортанні.
API шлюз - виконує адміністративні завдання, забезпечує невелику вагу мікросервісів і виконує дії з балансування навантаження, коли це необхідно.

2. Зобразити архітектуру інтернет магазину (чи іншого сервісу) в термінах мікросервісів, враховуючі інфраструктурні компоненти.
Amazon розділив свої монолітні програми на невеликі незалежні спеціалізовані програми. Процес розпочався з того, що розробники аналізували вихідний код і виділяли одиниці коду, які виконували одну функцію. Як тільки це було зроблено, блоки були загорнуті в інтерфейс веб-служби. Розроблено єдиний сервіс для кнопки «Купити» на сторінці товару.
Ще один був створений для податкового калькулятора. Нарешті, кожну незалежну службу було призначено команді розробників, що дозволило більш детально переглядати вузькі місця розробки для швидкого та ефективного вирішення.
При реалізації необхідно вирішити такі проблеми з обслуговуванням та експлуатацією, як залежність від мережі передачі даних, залежність від самих даних, обслуговування, тестування, складність.
Коли перебої в обслуговуванні можуть призвести до некоректної роботи всього конвеєра, який має бути стійким, щоб успішно виконати стирання. Тому слід передбачити можливість виконання завдань після відновлення сервісу, наприклад, за допомогою повторного відтворення.
Складність конвеєра стирання може бути значно знижена за рахунок рівня доступу до даних або каталогу даних, що зберігаються в онлайн-мікросервісах та автономних сховищах.

3. Розповісти про основні патерни проектування мікросервісних архітектур.
Патерн "Шлюз API" - єдина точка входу для будь-якого виклику мікросервісу; може працювати як проксі-сервіс для маршрутизації запиту до відповідного мікросервісу; може розгалужувати запит до кількох служб і агрегувати результати для надсилання споживачеві.
Патерн "Агрегатор" - об’єднує дані з різних сервісів, а потім надіслає кінцеву відповідь споживачеві.
Патерн "Композиція інтерфейсу користувача на стороні клієнта" - з мікросервісами інтерфейс користувача має бути розроблений як скелет із кількома розділами/областями екрана/сторінки. Кожна секція буде здійснювати виклик окремого серверного мікросервісу для отримання даних.
Патерн "Агрегація логу" - централізована служба журналювання, яка збирає журнали з кожного екземпляра служби. Користувачі можуть шукати та аналізувати журнали, налаштувати сповіщення.
Патерн "Показники ефективності" - служба метрик потрібна для збору статистики про окремі операції. Він має агрегувати показники служби додатків, яка надає звіти та попередження.
Патерн "Розподілена трасування" - Призначає кожному зовнішньому запиту унікальний ідентифікатор зовнішнього запиту; передає ідентифікатор зовнішнього запиту всім службам; записує інформацію про запити та операції.

4. Orcherstration vs Choreography.
Оркестровка мікросервісів — це логічна сутність, яка допомагає в управлінні мікросервісами.
Вона базується на концепції оркестру, де є кілька музикантів, які майстерно грають на своїх інструментах, що є послугою в нашій архітектурі мікросервісів. Диригент-оркестрант дає вказівку всім, про вузли.
Програвачі (Сервіси) самі по собі достатньо спроможні відтворити всю пісню, оскільки вони мають під рукою ноти (бізнес-логіку) пісень. Але щоб грати музику (Проект) разом, у симфонії їм потрібен диригент, який би всім керував.
З іншого боку, хореографія мікросервісів — це зовсім інший підхід до спілкування між мікросервісами. Хореографія, як випливає з назви, кожен окремий актор несе власну відповідальність і також знає вправу.
Основна відмінність між мікросервісною хореографією та оркестровкою полягає в тому, що в хореографії немає нічого центрального. Прийняття будь-якого з них залежить від вашого випадку використання. Якщо ви хочете дуже часто спілкуватися між службою, вам слід вибрати оркестровку, інакше хореографія є кращим варіантом.

5. Описати реалізацію паттерну Circuit breaker.
Паттерн Circuit Breaker додає стабільності, коли система відновлюється після падіння та мінімізує вплив цього падіння на продуктивність. Можна відстежувати події переходу за статусом для моніторингу та повідомлення адміністраторів про помилку.
Circuit Breaker виступає як проксі-сервіс між програмою та віддаленим сервісом. Проксі-сервіс моніторить останні помилки, для визначення, чи можна виконати операцію або просто відразу повернути помилку. Якщо на сервісі B щось пішло не так, він повертає сервісу А помилку і запам'ятовує, що там є помилки, і просто наступні запити не відправить на сервіс B. Ми не витрачаємо ресурси сервера в такому випадку.

6. Описати базові команди docker-compose, або іншого пакету, який застосовувався в роботі.
Команда "docker-compose -v" - показує версія докер-компоуз
Команда "docker-compose up" - запускає контейнер
Команда "docker-compose images" - перегляную образи
Команда "docker-compose start назва" - запустити контейнер
Команда "docker-compose rm назва" - видалити контейнери, які не активні

7. Описати механізм знаходження мікросервісів одне одним, як відбувається їх горизонтальне масштабування.
Однією з найбільших проблем під час переходу до програми на основі мікросервісів є зміна механізму зв’язку. Оскільки мікросервіси розподілені, і мікросервіси спілкуються один з одним за допомогою міжсервісного зв’язку на рівні мережі. Кожен мікросервіс має власний екземпляр і процес. Тому служби повинні взаємодіяти за допомогою протоколів міжсервісного зв’язку, таких як HTTP, gRPC або протокол AMQP брокерів повідомлень.
Існує два основних шаблони виявлення служби: виявлення на стороні клієнта та виявлення на стороні сервера.
На стороні клієнта: Клієнт запитує Реєстр послуг. Потім клієнт використовує алгоритм балансування навантаження, щоб вибрати один із доступних екземплярів служби та виконати запит.
На стороні сервера: Клієнт надсилає запит до служби через балансувальник навантаження, який виконує роль оркестратора. Балансувальник навантаження запитує реєстр служби та направляє кожен запит до доступного екземпляра служби.
Масштабування — це процес розбиття програмного забезпечення на різні блоки.
Масштабування осі Х також називають горизонтальним масштабуванням. У цій процедурі вся програма ділиться на різні горизонтальні частини. Зазвичай будь-яка програма веб-сервера може мати такий тип масштабування.
Горизонтальне масштабування полягає в реплікації «пляшкового горла». У випадку, коли потенційно система може обробляти 1Гб даних за секунду, а «пляшечне горло» – лише 100Мб, ми можемо створити 9-11 реплік «пляшкового шийки», що сукупно пропускатимуть ~1Гб даних.

8. Роль Service discovery та принцип роботи балансувальника на обранй технології при горизонтальному масштабуванні.
Service Discovery створений для того, щоб з мінімальними витратами можна підключити нову програму до нашого оточення. Використовуючи Service Discovery, ми можемо максимально розділити або контейнер як докера, або віртуальний сервіс від оточення, у якому він запущений.
Наприклад, коли програма запускається, вона здійснює реєстрацію в Service Discovery. Service Discovery повідомляє load-balancer. Load-balancer змінює свій конфіг автоматично і вже новий backend підключається до роботи. Таким чином, можуть додаватися backend, або, навпаки, виключатися з роботи.
Балансування навантаження стосується ефективного розподілу вхідного мережевого трафіку між групою внутрішніх серверів, також відомою як ферма серверів або пул серверів.
NGINX Plus і NGINX — це найкращі у своєму класі рішення для балансування навантаження, які використовуються на таких веб-сайтах із високим трафіком, як Dropbox, Netflix і Zynga.
Балансувальник навантаження діє як « дорожній поліцейський», який сидить перед вашими серверами та направляє клієнтські запити на всі сервери, здатні виконувати ці запити таким чином, щоб максимізувати швидкість і використання потужності та гарантувати, що жоден сервер не перевантажується, що може погіршити продуктивність . Якщо один сервер виходить з ладу, балансувальник навантаження перенаправляє трафік на інші онлайн-сервери. Коли новий сервер додається до групи серверів, балансувальник навантаження автоматично починає надсилати йому запити.
